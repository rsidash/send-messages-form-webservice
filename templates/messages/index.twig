{% extends "base.twig" %}

{% block body %}
    <div class="position-absolute top-0 start-0 m-2">
        <h1>Сервис отправки сообщений</h1>

        <a href="/messages/history">История сообщений</a>
        <form action="/messages" method="post">
            {% if validationErrors is not empty %}
                <div style="color: red">При отправке произошла ошибка
                    <ul>
                        {% for validationError in validationErrors %}
                            <li>
                                {{ validationError }}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
            <div>
                <p><label>Введите сообщение:</label></p>
                <textarea class="form-control" rows="4" cols="50" placeholder="Ваше сообщение..."
                          name="message">{% if validationErrors is not empty %}{{ message }}{% endif %}</textarea>
                <br>
                <br>
                <input class="btn btn-primary" type="submit" value="Отправить">
            </div>
        </form>
        {% if sendError is empty and validationErrors is empty and not isFirstLaunch %}
            <div>
                <p style="color: green">Сообщение успешно отправлено</p>
                <p><label>Отправленное сообщение:</label></p>
                <p>{{ message }}</p>
            </div>
        {% elseif sendError and validationErrors is empty %}
            <div>
                <p><label style="color: red">При отправке произошла следующая ошибка:</label></p>
                <p>{{ sendError }}</p>
            </div>
        {% endif %}
    </div>
{% endblock %}